{% load i18n widget_tweaks %}
{% with WIDGET_ERROR_CLASS='is-invalid' %}
<form hx-post="{{ request.path }}" id="details-form" class="needs-validation" novalidate> 
  <div class="tab-pane fade" id="general-tab-pane" role="tabpanel" aria-labelledby="general-tab" tabindex="0">
    <fieldset class="row g-3 mb-4">
      <legend>{% translate 'Identification' %}</legend>
      <div class="col-md-6">
        <label for="{{ form.item_id.id_for_label }}" class="form-label">{{ form.item_id.label_tag }}</label>
        {% render_field form.item_id class="form-control" readonly="readonly" %}
        <div class="invalid-feedback">{{ form.item_id.errors|first }}</div>
      </div>
      <div class="col-md-6">
        <label for="{{ form.item_name.id_for_label }}" class="form-label">{{ form.item_name.label_tag }}</label>
        {% render_field form.item_name class="form-control" autocomplete="off" %}
        <div class="invalid-feedback">{{ form.item_name.errors|first }}</div>
      </div>
      <div class="col-md-6">
        <label for="{{ form.item_group.id_for_label }}" class="form-label">{{ form.item_group.label_tag }}</label>
        {% render_field form.item_group class="form-control" autocomplete="off" %}
        <div class="invalid-feedback">{{ form.item_group.errors|first }}</div>
      </div>
      <div class="col-md-6">
        <label for="{{ form.item_type.id_for_label }}" class="form-label">{{ form.item_type.label_tag }}</label>
        {% render_field form.item_type class="form-control" %}
        <div class="invalid-feedback">{{ form.item_type.errors|first }}</div>
      </div>
      <div class="col-12">
        <label for="itemDefaultTxt" class="form-label">{% translate 'Txt'|title %}</label>
        <textarea class="form-control" id="itemDefaultTxt" rows="3" readonly>{{ itemtable.default_txt }}</textarea>
      </div>
    </fieldset>
    <fieldset class="row g-3 mb-4">
      <legend>{% translate 'Item dimensions - Default' %}</legend>
      <div class="col-md-6">
        <label for="{{ form.standard_config.id_for_label }}" class="form-label">{{ form.standard_config.label_tag }}</label>
        {% render_field form.standard_config class="form-control" %}
        <div class="invalid-feedback">{{ form.standard_config.errors|first }}</div>
      </div>
      <div class="col-md-6">
        <label for="{{ form.standard_size.id_for_label }}" class="form-label">{{ form.standard_size.label_tag }}</label>
        {% render_field form.standard_size class="form-control" %}
        <div class="invalid-feedback">{{ form.standard_config.errors|first }}</div>
      </div>
      <div class="col-md-6">
        <label for="{{ form.standard_color.id_for_label }}" class="form-label">{{ form.standard_color.label_tag }}</label>
        {% render_field form.standard_color class="form-control" %}
        <div class="invalid-feedback">{{ form.standard_color.errors|first }}</div>
      </div>
    </fieldset>
  </div>
  <div class="tab-pane fade" id="references-tab-pane" role="tabpanel" aria-labelledby="References-tab" tabindex="0">
    <div class="row g-3">
      <fieldset class="col">
        <legend>{% translate 'Inventory' %}</legend>
        <div class="mb-3">
          <label for="{{ inventModuleForm.unit.id_for_label }}" class="form-label">{{ inventModuleForm.unit.label_tag }}</label>
          {% render_field inventModuleForm.unit class="form-control" %}
          <div class="invalid-feedback">{{ inventModuleForm.unit.errors|first }}</div>
        </div>
        <div class="mb-3">
          <label for="{{ inventModuleForm.tax_item_group.id_for_label }}" class="form-label">{{ inventModuleForm.tax_item_group.label_tag }}</label>
          {% render_field inventModuleForm.tax_item_group class="form-control" %}
          <div class="invalid-feedback">{{ inventModuleForm.tax_item_group.errors|first }}</div>
        </div> 
        <div class="mb-3">
          <label for="{{ inventModuleForm.overdelivery_pct.id_for_label }}" class="form-label">{{ inventModuleForm.overdelivery_pct.label_tag }}</label>
          {% render_field inventModuleForm.overdelivery_pct class="form-control" %}
          <div class="invalid-feedback">{{ inventModuleForm.overdelivery_pct.errors|first }}</div>
          <div class="form-text">{{ inventModuleForm.overdelivery_pct.help_text }}</div>
        </div>
        <div class="mb-3">
          <label for="{{ inventModuleForm.underdelivery_pct.id_for_label }}" class="form-label">{{ inventModuleForm.underdelivery_pct.label_tag }}</label>
          {% render_field inventModuleForm.underdelivery_pct class="form-control" %}
          <div class="invalid-feedback">{{ inventModuleForm.underdelivery_pct.errors|first }}</div>
          <div class="form-text">{{ inventModuleForm.underdelivery_pct.help_text }}</div>
        </div>
      </fieldset>
      <fieldset class="col">
        <legend>{% translate 'Purchase' %}</legend>
        <div class="mb-3">
          <label for="{{ purModuleForm.unit.id_for_label }}" class="form-label">{{ purModuleForm.unit.label_tag }}</label>
          {% render_field purModuleForm.unit class="form-control" %}
          <div class="invalid-feedback">{{ purModuleForm.unit.errors|first }}</div>
        </div>
        <div class="mb-3">
          <label for="{{ purModuleForm.tax_item_group.id_for_label }}" class="form-label">{{ purModuleForm.tax_item_group.label_tag }}</label>
          {% render_field purModuleForm.tax_item_group class="form-control" %}
          <div class="invalid-feedback">{{ purModuleForm.tax_item_group.errors|first }}</div>
        </div> 
        <div class="mb-3">
          <label for="{{ purModuleForm.overdelivery_pct.id_for_label }}" class="form-label">{{ purModuleForm.overdelivery_pct.label_tag }}</label>
          {% render_field purModuleForm.overdelivery_pct class="form-control" %}
          <div class="invalid-feedback">{{ purModuleForm.overdelivery_pct.errors|first }}</div>
          <div class="form-text">{{ purModuleForm.overdelivery_pct.help_text }}</div>
        </div>
        <div class="mb-3">
          <label for="{{ purModuleForm.underdelivery_pct.id_for_label }}" class="form-label">{{ purModuleForm.underdelivery_pct.label_tag }}</label>
          {% render_field purModuleForm.underdelivery_pct class="form-control" %}
          <div class="invalid-feedback">{{ purModuleForm.underdelivery_pct.errors|first }}</div>
          <div class="form-text">{{ purModuleForm.underdelivery_pct.help_text }}</div>
        </div>
      </fieldset>
      <fieldset class="col">
        <legend>{% translate 'Sales' %}</legend>
        <div class="mb-3">
          <label for="{{ salesModuleForm.unit.id_for_label }}" class="form-label">{{ salesModuleForm.unit.label_tag }}</label>
          {% render_field salesModuleForm.unit class="form-control" %}
          <div class="invalid-feedback">{{ salesModuleForm.unit.errors|first }}</div>
        </div>
        <div class="mb-3">
          <label for="{{ salesModuleForm.tax_item_group.id_for_label }}" class="form-label">{{ salesModuleForm.tax_item_group.label_tag }}</label>
          {% render_field salesModuleForm.tax_item_group class="form-control" %}
          <div class="invalid-feedback">{{ salesModuleForm.tax_item_group.errors|first }}</div>
        </div> 
        <div class="mb-3">
          <label for="{{ salesModuleForm.overdelivery_pct.id_for_label }}" class="form-label">{{ salesModuleForm.overdelivery_pct.label_tag }}</label>
          {% render_field salesModuleForm.overdelivery_pct class="form-control" %}
          <div class="invalid-feedback">{{ salesModuleForm.overdelivery_pct.errors|first }}</div>
          <div class="form-text">{{ salesModuleForm.overdelivery_pct.help_text }}</div>
        </div>
        <div class="mb-3">
          <label for="{{ salesModuleForm.underdelivery_pct.id_for_label }}" class="form-label">{{ salesModuleForm.underdelivery_pct.label_tag }}</label>
          {% render_field salesModuleForm.underdelivery_pct class="form-control" %}
          <div class="invalid-feedback">{{ salesModuleForm.underdelivery_pct.errors|first }}</div>
          <div class="form-text">{{ salesModuleForm.underdelivery_pct.help_text }}</div>
        </div>
      </fieldset>
    </div>
  </div>
  <div class="d-grid gap-2 d-md-flex justify-content-md-end p-2 d-none">
      <button type="submit" class="btn btn-primary d-none" id="btnsubmit">{% translate 'Submit' %}</button>
  </div>
</form>
{% endwith %}
<script>
// show form after page refreshed
$(function() {
  var activeTab = $(".nav-link.active").attr('data-bs-target');
  //alert(activeTab);
  $(".tab-pane").not(activeTab).addClass('d-none')
  $(activeTab).addClass("active show");
})
</script>