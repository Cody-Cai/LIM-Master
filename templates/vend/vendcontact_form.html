{% load i18n widget_tweaks static %}
<div hx-target="this" hx-swap="outerHTML" class="shadow-sm p-3 mb-5 bg-body-tertiary rounded" id="contactform">
    {% if form.non_field_errors %}
        <div class="alert alert-danger alert-dismissible" role="alert">
            <div id="form_errors">
                {% for value in form.non_field_errors %}
                    {{ value }}
                {% endfor %}
            </div>
            <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
        </div>
    {% endif %}
    {% with WIDGET_ERROR_CLASS='is-invalid' %}
    <form hx-post="{{ request.path }}">
        {% csrf_token %}
        <div class="row g-3">
            <div class="col-md-3">
                <label for="{{ form.name.id_for_label }}" class="form-label">{{ form.name.label_tag }}</label>
                {% render_field form.name class="form-control" %}
                <div class="invalid-feedback">{{ form.name.errors|first }}</div>
            </div>
            <div class="col-md-3">
                <label for="{{ form.is_primary.id_for_label }}" class="form-label">{{ form.is_primary.label_tag }}</label>
                <div class="form-check">
                <label for="{{ form.is_primary.id_for_label }}" class="form-check-label">{{ form.is_primary.label }}</label>
                {% render_field form.is_primary class="form-check-input" type="checkbox"  %}
                <div class="invalid-feedback">{{ form.is_primary.errors|first }}</div>
                </div>
                <div class="form-text">{{ form.is_primary.help_text }}</div>
            </div>
            <div class="col-md-3">
                <label for="{{ form.telephone.id_for_label }}" class="form-label">{{ form.telephone.label_tag }}</label>
                {% render_field form.telephone class="form-control" %}
                <div class="invalid-feedback">{{ form.telephone.errors|first }}</div>
                <div class="form-text">{{ form.telephone.help_text }}</div>
            </div>
            <div class="col-md-3">
                <label for="{{ form.telephoneext.id_for_label }}" class="form-label">{{ form.telephoneext.label_tag }}</label>
                {% render_field form.telephoneext class="form-control" %}
                <div class="invalid-feedback">{{ form.telephoneext.errors|first }}</div>
                <div class="form-text">{{ form.telephoneext.help_text }}</div>
            </div>
            <div class="col-md-3">
                <label for="{{ form.teleFax.id_for_label }}" class="form-label">{{ form.teleFax.label_tag }}</label>
                {% render_field form.teleFax class="form-control" %}
                <div class="invalid-feedback">{{ form.teleFax.errors|first }}</div>
                <div class="form-text">{{ form.teleFax.help_text }}</div>
            </div>
            <div class="col-md-3">
                <label for="{{ form.mobilephone.id_for_label }}" class="form-label">{{ form.mobilephone.label_tag }}</label>
                {% render_field form.mobilephone class="form-control" %}
                <div class="invalid-feedback">{{ form.mobilephone.errors|first }}</div>
                <div class="form-text">{{ form.mobilephone.help_text }}</div>
            </div>
            <div class="col-md-6">
                <label for="{{ form.email.id_for_label }}" class="form-label">{{ form.email.label_tag }}</label>
                {% render_field form.email class="form-control" %}
                <div class="invalid-feedback">{{ form.email.errors|first }}</div>
                <div class="form-text">{{ form.email.help_text }}</div>
            </div>
            <div class="col-md-3 d-none">
                {{ form.vendtable }}
            </div>
            {% if vendcontact %}
            <div class="d-grid gap-2 d-md-flex justify-content-md-end">
                <button type="submit" class="btn btn-primary btn-sm">{% translate 'Submit' %}</button>
                <button type="button" class="btn btn-secondary btn-sm me-2" hx-get="{% url 'vend:vendcontact-detail' vendcontact.id %}">{% translate 'Cancel' %}</button>
            </div>
            {% else %}
            <div class="d-grid gap-2 d-md-flex justify-content-md-end">
                {% if perms.vend.add_vendcontact %}
                <button type="submit" class="btn btn-primary btn-sm">{% translate 'Submit' %}</button>
                {% endif %}
                <button type="button" class="btn btn-secondary btn-sm me-2" onclick="closeForm()">{% translate 'Cancel' %}</button>
            </div>
            {% endif %}
        </div>
    </form>
    {% endwith %}
</div>
<script>
function closeForm() {
  var divform = document.getElementById('contactform');
  divform.remove();
}
</script>